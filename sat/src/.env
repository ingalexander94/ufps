# SERVER
PORT=8080

PING = Todo ok!

# DATABASE
USER_DB = USERDPTOSIS
PASSSWORD_DB = USERDPTOSIS_1988
HOST_DB = 192.168.200.88
PORT_DB = 1522
SERVICE_NAME = UFPS
SERVER = DEDICATED

# AUTH
SECRET_KEY = eS70EsuN53cr37

# SQL
STUDENT_BY_CODE = SELECT 'masculino' AS sexo, 1 AS semestre, 3.25 AS promedio, 3.25 AS promedioPonderadoAcomulado, 132 AS creditosAprobados, 141 AS creditosTotales, '+1 (822) 570-2027' AS telefono, '736 Java Street, Wakulla, Illinois, 4799' AS direccion, 'Tue Jun 29 2018 19:29:00 GMT-0500' AS fechaIngreso, (SELECT CASE WHEN EXISTS (SELECT codigo FROM consulta_estudiante WHERE (codigo = '%s' OR email = '%s') AND codigo IN (SELECT materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno AS estudiante FROM  materias_matriculadas INNER JOIN materia ON materias_matriculadas.cod_carrera = materia.cod_carrera AND materias_matriculadas.cod_materia = materia.cod_materia WHERE materia.modulo_acu_012 = 'S' AND materia.nombre LIKE '%s' GROUP BY materias_matriculadas.cod_carrera, materias_matriculadas.cod_alumno)) THEN 'TRUE' ELSE 'FALSE' END FROM dual) AS ac012, tmatriculado AS estado, codigo, documento, TRUNC(months_between(sysdate, fecha_nacimiento) / 12) AS edad, primer_nombre || ' ' || segundo_nombre AS nombre, primer_apellido || ' ' ||  segundo_apellido AS apellido, email AS correo, 'estudiante' AS rol, nomcarrera AS programa FROM CONSULTA_ESTUDIANTE WHERE codigo = '%s' OR email = '%s'

TEACHER_BY_CODE = SELECT 'masculino' AS sexo, '+1 (822) 570-2027' AS telefono, '736 Java Street, Wakulla, Illinois, 4799' AS direccion, 'INGENIERIA DE SISTEMAS' AS programa,'TRUE' AS esActivo , cod_profesor AS codigo, documento, TRUNC(months_between(sysdate, fecha_nacimiento) / 12) AS edad, nombre1 || ' ' || nombre2 AS nombre, apellido1 || ' ' || apellido2 AS apellido, emaili as correo, 'docente' as rol FROM CONSULTA_PROFESOR WHERE %s = '%s'

COURSES_STUDENT = SELECT materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno AS estudiante, materias_matriculadas.cod_car_mat ||  materias_matriculadas.cod_mat_mat AS codigo, materia.nombre, materia.creditos, materia.semestre ,materias_matriculadas.grupo, LISTAGG(horario.dia || ' ' || TO_CHAR(horario.hora_ini, 'HH24:MI') || '-' || TO_CHAR(horario.hora_fin, 'HH24:MI'), ' y ') WITHIN GROUP (ORDER BY horario.dia) AS horario, grupo.cod_profesor AS docente FROM materia INNER JOIN materias_matriculadas ON materia.cod_carrera =  materias_matriculadas.cod_car_mat AND materia.cod_materia =  materias_matriculadas.cod_mat_mat INNER JOIN horario ON horario.cod_carrera = materias_matriculadas.cod_car_mat AND horario.cod_materia = materias_matriculadas.cod_mat_mat AND horario.grupo = materias_matriculadas.grupo INNER JOIN grupo ON grupo.cod_carrera = materias_matriculadas.cod_car_mat AND grupo.cod_materia = materias_matriculadas.cod_mat_mat AND grupo.grupo = materias_matriculadas.grupo WHERE  materias_matriculadas.cod_carrera = '%s' AND  materias_matriculadas.cod_alumno = '%s' GROUP BY materias_matriculadas.cod_alumno, materias_matriculadas.cod_carrera, materias_matriculadas.cod_car_mat, materias_matriculadas.cod_mat_mat, horario.grupo, materia.nombre, materia.creditos, materia.semestre ,materias_matriculadas.grupo, grupo.cod_profesor

COURSES_TEACHER = SELECT materia.nombre, materia.cod_carrera || materia.cod_materia AS codigo, materia.semestre, materia.creditos,LISTAGG(horario.dia || ' ' || TO_CHAR(horario.hora_ini, 'HH24:MI') || '-' || TO_CHAR(horario.hora_fin, 'HH24:MI'), ' y ') WITHIN GROUP (ORDER BY horario.dia) AS horario , grupo.cod_profesor AS docente, grupo.grupo FROM grupo INNER JOIN materia ON grupo.cod_carrera = materia.cod_carrera AND grupo.cod_materia = materia.cod_materia INNER JOIN horario ON grupo.cod_carrera = horario.cod_carrera AND grupo.cod_materia = horario.cod_materia AND grupo.grupo = horario.grupo WHERE grupo.cod_profesor = '%s' GROUP BY materia.nombre, materia.cod_carrera, materia.cod_materia, materia.semestre, materia.creditos, grupo.grupo, grupo.cod_profesor 

STUDENTS_OF_COURSE = SELECT * FROM ( SELECT tmp.*, rownum rn FROM ( SELECT (SELECT CASE WHEN EXISTS (SELECT codigo FROM consulta_estudiante WHERE (codigo = materias_matriculadas.cod_carrera||materias_matriculadas.cod_alumno) AND codigo IN (SELECT materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno AS estudiante FROM  materias_matriculadas INNER JOIN materia ON materias_matriculadas.cod_carrera = materia.cod_carrera AND materias_matriculadas.cod_materia = materia.cod_materia WHERE materia.modulo_acu_012 = 'S' AND materia.nombre LIKE '%s' GROUP BY materias_matriculadas.cod_carrera, materias_matriculadas.cod_alumno)) THEN 'TRUE' ELSE 'FALSE' END FROM dual) AS ac012, 'masculino' AS sexo, 1 AS semestre, 3.25 AS promedio, 3.25 AS promedioPonderadoAcomulado, 132 AS creditosAprobados, 141 AS creditosTotales, '+1 (822) 570-2027' AS telefono, '736 Java Street, Wakulla, Illinois, 4799' AS direccion, 'Tue Jun 29 2018 19:29:00 GMT-0500' AS fechaIngreso, consulta_estudiante.tmatriculado AS estado, consulta_estudiante.codigo, consulta_estudiante.documento, TRUNC(months_between(sysdate, consulta_estudiante.fecha_nacimiento) / 12) AS edad, consulta_estudiante.primer_nombre || ' ' || consulta_estudiante.segundo_nombre AS nombre, consulta_estudiante.primer_apellido || ' ' ||  consulta_estudiante.segundo_apellido AS apellido, consulta_estudiante.email AS correo, 'estudiante' AS rol, consulta_estudiante.nomcarrera AS programa FROM materias_matriculadas INNER JOIN consulta_estudiante ON materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno = consulta_estudiante.codigo WHERE materias_matriculadas.cod_car_mat = '%s' AND materias_matriculadas.cod_mat_mat='%s' AND materias_matriculadas.grupo = '%s' %s ORDER BY consulta_estudiante.codigo DESC ) tmp WHERE rownum <= %s) WHERE rn > %s  

TOTAL_PAGES = SELECT CEIL(COUNT(*) / %s) AS total FROM materias_matriculadas INNER JOIN consulta_estudiante ON materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno = consulta_estudiante.codigo WHERE materias_matriculadas.cod_car_mat = '%s' AND materias_matriculadas.cod_mat_mat='%s' AND materias_matriculadas.grupo = '%s' %s

STUDENTS_AC012_BY_COURSE = SELECT * FROM (SELECT 1 AS riesgo, 'masculino' AS sexo, 1 AS semestre, 3.25 AS promedio, 3.25 AS promedioPonderadoAcomulado, 132 AS creditosAprobados, 141 AS creditosTotales, '+1 (822) 570-2027' AS telefono, '736 Java Street, Wakulla, Illinois, 4799' AS direccion, 'Tue Jun 29 2018 19:29:00 GMT-0500' AS fechaIngreso, consulta_estudiante.tmatriculado AS estado, consulta_estudiante.codigo, consulta_estudiante.documento, TRUNC(months_between(sysdate, consulta_estudiante.fecha_nacimiento) / 12) AS edad, consulta_estudiante.primer_nombre || ' ' || consulta_estudiante.segundo_nombre AS nombre, consulta_estudiante.primer_apellido || ' ' ||  consulta_estudiante.segundo_apellido AS apellido, consulta_estudiante.email AS correo, 'estudiante' AS rol, consulta_estudiante.nomcarrera AS programa FROM materias_matriculadas INNER JOIN consulta_estudiante ON materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno = consulta_estudiante.codigo WHERE cod_car_mat = '%s' AND cod_mat_mat='%s' AND grupo = '%s') curso WHERE curso.codigo IN (SELECT *  FROM (SELECT materias_matriculadas.cod_carrera ||materias_matriculadas.cod_alumno AS estudiante FROM  materias_matriculadas INNER JOIN materia ON materias_matriculadas.cod_carrera = materia.cod_carrera AND materias_matriculadas.cod_materia = materia.cod_materia WHERE materia.modulo_acu_012 = 'S' AND materia.nombre LIKE '%s' GROUP BY materias_matriculadas.cod_carrera, materias_matriculadas.cod_alumno))

COURSES_AC012 = SELECT materias_matriculadas.cod_carrera || materias_matriculadas.cod_materia AS codigo, materia.creditos, materia.semestre, materias_matriculadas.grupo, materia.nombre FROM  materias_matriculadas INNER JOIN materia ON materias_matriculadas.cod_carrera = materia.cod_carrera AND materias_matriculadas.cod_materia = materia.cod_materia WHERE materia.modulo_acu_012 = 'S' AND materias_matriculadas.cod_carrera || materias_matriculadas.cod_alumno = '%s'

COURSES_BY_SEMESTER = SELECT cod_carrera || cod_materia AS codigo, nombre,creditos FROM materia WHERE cod_carrera = '%s' AND semestre = '%s' AND activa = 'S' ORDER BY cod_carrera || cod_materia DESC

GROUPS_BY_COURSE = SELECT materia.cod_carrera || materia.cod_materia AS codigo, materia.nombre, grupo.cod_profesor AS codigodocente, consulta_profesor.nombre1 || ' ' || consulta_profesor.nombre2 AS nombredocente, consulta_profesor.apellido1 || ' ' || consulta_profesor.apellido2 AS apellidodocente, consulta_profesor.emaili AS correodocente, grupo.grupo, grupo.num_max_alumnos, grupo.num_alum_matriculados FROM materia INNER JOIN grupo ON materia.cod_carrera = grupo.cod_carrera AND materia.cod_materia = grupo.cod_materia INNER JOIN consulta_profesor ON consulta_profesor.cod_profesor = grupo.cod_profesor WHERE materia.cod_carrera = '%s' AND materia.cod_materia = '%s' ORDER BY grupo.grupo

SEMESTERS_OF_PROGRAM = SELECT max(TO_NUMBER(materia.semestre, '99')) AS semestres from materia WHERE materia.cod_carrera = '%s' AND materia.activa = 'S' AND materia.nombre NOT LIKE '%s' 